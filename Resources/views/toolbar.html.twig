<div class="perform-rich-content">
  <nav class="nav navbar-default navbar-top">
    <div class="navbar-header">
      <a href="/" class="navbar-brand">Page Editor</a>
    </div>
    <ul class="nav navbar-nav">
      {% if currentVersion is not null %}
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <i class="fa fa-clock-o"></i>
            <span class="current-version-title">{{currentVersion.title}}</span>
            <i class="fa fa-caret-down"></i>
          </a>
          <ul class="dropdown-menu version-selector">
            {% for version in versions %}
              <li>
                <a href="#"
                   class="{% if version == currentVersion %}active {% endif %}version version-{{version.id}}"
                   data-id="{{version.id}}"
                   data-publish-url="{{path('perform_pageeditor_editor_publishversion', {id: version.id})}}"
                   data-save-url="{{path('perform_pageeditor_editor_saveversion', {id: version.id})}}"
                   data-load-url="{{path('perform_pageeditor_editor_loadversion', {id: version.id})}}">
                  {{version.title}}
                  <span class="published-indicator">
                    {% if version.published %}
                      (published)
                    {% endif %}
                  </span>
                </a>
              </li>
            {% endfor %}
            <li class="divider"></li>
            <li><a href="#">Show all</a></li>
          </ul>
        </li>
        <li>
          <a class="action-save" href="#">
            Save
          </a>
        </li>
        <li>
          <a href="#">
            Save As
          </a>
        </li>
        <li>
          <a class="action-publish" href="#">
            Publish
          </a>
        </li>
      {% endif %}
      <li>
        <a href="{{path('perform_pageeditor_session_end')}}">
          Finish Editing
        </a>
      </li>
    </ul>
  </nav>

  <div class="modal" id="load-mask" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
      <div class="modal-body">
        <i class="fa fa-spin fa-spinner"></i>
      </div>
    </div>
  </div>
</div>

{% block scripts %}
  <script src="{{asset('/bundles/performmedia/app.js')}}"></script>
  <script src="{{asset('/bundles/performrichcontent/editor.js')}}"></script>
{% endblock %}

<script>
 (function() {
   $('.perform-page-editor-section').each(function() {
     Perform.richContent.init(this, {
       contentId: this.getAttribute('data-content'),
     });
   });
 })();
</script>
